# sk_bash_completion - Alan Christopher Thomas
# http://alanchristopherthomas.com/

_sk() {
    local word opts
    word="${COMP_WORDS[COMP_CWORD])}"
    opts=$(ps ax -o pid,cmd | awk '$2 == "python" && $4 == "runserver" && $3 ~ /^\.\.\/[a-zA-Z0-9]+\/manage\.py/ {print $3}' | cut -d'/' -f 2)
    COMPREPLY=($(compgen -W "${opts}" -- ${word}))
    return 0
}
complete -F _sk sk
